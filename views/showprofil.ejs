<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link rel='stylesheet' href='/stylesheets/style_user.css' />
		<title>Profil user</title>
	</head>
	<body>
		<h2>Profil of <%= user.login %></h2>
		<div class=".information_user">
			<p>Nom: <%= user.nom %></p>
			<p>Prenom: <%= user.prenom %></p>
			<p>Email: <%= user.email %></p>
			<p>Sex: <%= user.sex %></p>
			<p>Age: <%= user.age %> ans</p>
			<p>Orientation sexuelle: <%= user.orientation %></p>
			<p>Interets: <%= user.interets %></p>
			<p>Description: <%= user.bio %></p>
		</div>
		<% if (user.accept == 1) { %>
		<div id="map" style="width:400px;height:400px">My map will go here</div>
		<% } else {%>
		<div class="">
			 <p><%= user.login %>, ne souhaite pas afficher sa localisation</p>
		</div>
		<% } %>
		<div class="like">
			<a id="like_button" href="" >Je like <%= user.login %></a>
		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCYV5V1wefNwQQ_5ukp4SLtcqmrUh2Kp48"></script>
		<script type="text/javascript">
		if (<%= user.accept %>){
		initMap();
		}
		function initMap() {
  			var myLatLng = {lat: <%= user.latitude %>, lng: <%= user.longitude %>};
			  var map = new google.maps.Map(document.getElementById('map'), {
			    zoom: 12,
			    center: myLatLng
			  });

			  var marker = new google.maps.Marker({
			    position: myLatLng,
			    map: map,
			    title: 'Hello World!'
			  });
		  }

		  $('#like_button').click(function () {
	              $.ajax({
	                type: 'post',
	                data: JSON.stringify({
						user: <%-JSON.stringify(user.login)%>
					}),
	                contentType: 'application/json; charset=utf-8',
	                url: 'like',
	              });
	          });
		</script>
	</body>
</html>
